# `react-router`

## 7.6.0

### Minor Changes

- Added a new `react-router.config.ts` `routeDiscovery` option to configure Lazy Route Discovery behavior. ([#13451](https://github.com/remix-run/react-router/pull/13451))

  - By default, Lazy Route Discovery is enabled and makes manifest requests to the `/__manifest` path:
    - `routeDiscovery: { mode: "lazy", manifestPath: "/__manifest" }`
  - You can modify the manifest path used:
    - `routeDiscovery: { mode: "lazy", manifestPath: "/custom-manifest" }`
  - Or you can disable this feature entirely and include all routes in the manifest on initial document load:
    - `routeDiscovery: { mode: "initial" }`

- Add support for route component props in `createRoutesStub`. This allows you to unit test your route components using the props instead of the hooks: ([#13528](https://github.com/remix-run/react-router/pull/13528))

  ```tsx
  let RoutesStub = createRoutesStub([
    {
      path: "/",
      Component({ loaderData }) {
        let data = loaderData as { message: string };
        return <pre data-testid="data">Message: {data.message}</pre>;
      },
      loader() {
        return { message: "hello" };
      },
    },
  ]);

  render(<RoutesStub />);

  await waitFor(() => screen.findByText("Message: hello"));
  ```

### Patch Changes

- Fix `react-router` module augmentation for `NodeNext` ([#13498](https://github.com/remix-run/react-router/pull/13498))

- Don't bundle `react-router` in `react-router/dom` CJS export ([#13497](https://github.com/remix-run/react-router/pull/13497))

- Fix bug where a submitting `fetcher` would get stuck in a `loading` state if a revalidating `loader` redirected ([#12873](https://github.com/remix-run/react-router/pull/12873))

- Fix hydration error if a server `loader` returned `undefined` ([#13496](https://github.com/remix-run/react-router/pull/13496))

- Fix initial load 404 scenarios in data mode ([#13500](https://github.com/remix-run/react-router/pull/13500))

- Stabilize `useRevalidator`'s `revalidate` function ([#13542](https://github.com/remix-run/react-router/pull/13542))

- Preserve status code if a `clientAction` throws a `data()` result in framework mode ([#13522](https://github.com/remix-run/react-router/pull/13522))

- Be defensive against leading double slashes in paths to avoid `Invalid URL` errors from the URL constructor ([#13510](https://github.com/remix-run/react-router/pull/13510))

  - Note we do not sanitize/normalize these paths - we only detect them so we can avoid the error that would be thrown by `new URL("//", window.location.origin)`

- Remove `Navigator` declaration for `navigator.connection.saveData` to avoid messing with any other types beyond `saveData` in userland ([#13512](https://github.com/remix-run/react-router/pull/13512))

- Fix `handleError` `params` values on `.data` requests for routes with a dynamic param as the last URL segment ([#13481](https://github.com/remix-run/react-router/pull/13481))

- Don't trigger an `ErrorBoundary` UI before the reload when we detect a manifest verison mismatch in Lazy Route Discovery ([#13480](https://github.com/remix-run/react-router/pull/13480))

- Inline `turbo-stream@2.4.1` dependency and fix decoding ordering of Map/Set instances ([#13518](https://github.com/remix-run/react-router/pull/13518))

- Only render dev warnings in DEV mode ([#13461](https://github.com/remix-run/react-router/pull/13461))

- UNSTABLE: Fix a few bugs with error bubbling in middleware use-cases ([#13538](https://github.com/remix-run/react-router/pull/13538))

- Short circuit post-processing on aborted `dataStrategy` requests ([#13521](https://github.com/remix-run/react-router/pull/13521))

  - This resolves non-user-facing console errors of the form `Cannot read properties of undefined (reading 'result')`

## 7.5.3

### Patch Changes

- Fix bug where bubbled action errors would result in `loaderData` being cleared at the handling `ErrorBoundary` route ([#13476](https://github.com/remix-run/react-router/pull/13476))
- Handle redirects from `clientLoader.hydrate` initial load executions ([#13477](https://github.com/remix-run/react-router/pull/13477))

## 7.5.2

### Patch Changes

- Update Single Fetch to also handle the 204 redirects used in `?_data` requests in Remix v2 ([#13364](https://github.com/remix-run/react-router/pull/13364))

  - This allows applications to return a redirect on `.data` requests from outside the scope of React Router (i.e., an `express`/`hono` middleware)
  - ‚ö†Ô∏è Please note that doing so relies on implementation details that are subject to change without a SemVer major release
  - This is primarily done to ease upgrading to Single Fetch for existing Remix v2 applications, but the recommended way to handle this is redirecting from a route middleware

- Adjust approach for Prerendering/SPA Mode via headers ([#13453](https://github.com/remix-run/react-router/pull/13453))

## 7.5.1

### Patch Changes

- Fix single fetch bug where no revalidation request would be made when navigating upwards to a reused parent route ([#13253](https://github.com/remix-run/react-router/pull/13253))

- When using the object-based `route.lazy` API, the `HydrateFallback` and `hydrateFallbackElement` properties are now skipped when lazy loading routes after hydration. ([#13376](https://github.com/remix-run/react-router/pull/13376))

  If you move the code for these properties into a separate file, you can use this optimization to avoid downloading unused hydration code. For example:

  ```ts
  createBrowserRouter([
    {
      path: "/show/:showId",
      lazy: {
        loader: async () => (await import("./show.loader.js")).loader,
        Component: async () => (await import("./show.component.js")).Component,
        HydrateFallback: async () =>
          (await import("./show.hydrate-fallback.js")).HydrateFallback,
      },
    },
  ]);
  ```

- Properly revalidate prerendered paths when param values change ([#13380](https://github.com/remix-run/react-router/pull/13380))

- UNSTABLE: Add a new `unstable_runClientMiddleware` argument to `dataStrategy` to enable middleware execution in custom `dataStrategy` implementations ([#13395](https://github.com/remix-run/react-router/pull/13395))

- UNSTABLE: Add better error messaging when `getLoadContext` is not updated to return a `Map`" ([#13242](https://github.com/remix-run/react-router/pull/13242))

- Do not automatically add `null` to `staticHandler.query()` `context.loaderData` if routes do not have loaders ([#13223](https://github.com/remix-run/react-router/pull/13223))

  - This was a Remix v2 implementation detail inadvertently left in for React Router v7
  - Now that we allow returning `undefined` from loaders, our prior check of `loaderData[routeId] !== undefined` was no longer sufficient and was changed to a `routeId in loaderData` check - these `null` values can cause issues for this new check
  - ‚ö†Ô∏è This could be a "breaking bug fix" for you if you are doing manual SSR with `createStaticHandler()`/`<StaticRouterProvider>`, and using `context.loaderData` to control `<RouterProvider>` hydration behavior on the client

- Fix prerendering when a loader returns a redirect ([#13365](https://github.com/remix-run/react-router/pull/13365))

- UNSTABLE: Update context type for `LoaderFunctionArgs`/`ActionFunctionArgs` when middleware is enabled ([#13381](https://github.com/remix-run/react-router/pull/13381))

- Add support for the new `unstable_shouldCallHandler`/`unstable_shouldRevalidateArgs` APIs in `dataStrategy` ([#13253](https://github.com/remix-run/react-router/pull/13253))

## 7.5.0

### Minor Changes

- Add granular object-based API for `route.lazy` to support lazy loading of individual route properties, for example: ([#13294](https://github.com/remix-run/react-router/pull/13294))

  ```ts
  createBrowserRouter([
    {
      path: "/show/:showId",
      lazy: {
        loader: async () => (await import("./show.loader.js")).loader,
        action: async () => (await import("./show.action.js")).action,
        Component: async () => (await import("./show.component.js")).Component,
      },
    },
  ]);
  ```

  **Breaking change for `route.unstable_lazyMiddleware` consumers**

  The `route.unstable_lazyMiddleware` property is no longer supported. If you want to lazily load middleware, you must use the new object-based `route.lazy` API with `route.lazy.unstable_middleware`, for example:

  ```ts
  createBrowserRouter([
    {
      path: "/show/:showId",
      lazy: {
        unstable_middleware: async () =>
          (await import("./show.middleware.js")).middleware,
        // etc.
      },
    },
  ]);
  ```

### Patch Changes

- Introduce `unstable_subResourceIntegrity` future flag that enables generation of an importmap with integrity for the scripts that will be loaded by the browser. ([#13163](https://github.com/remix-run/react-router/pull/13163))

## 7.4.1

### Patch Changes

- Fix types on `unstable_MiddlewareFunction` to avoid type errors when a middleware doesn't return a value ([#13311](https://github.com/remix-run/react-router/pull/13311))
- Dedupe calls to `route.lazy` functions ([#13260](https://github.com/remix-run/react-router/pull/13260))
- Add support for `route.unstable_lazyMiddleware` function to allow lazy loading of middleware logic. ([#13210](https://github.com/remix-run/react-router/pull/13210))

  **Breaking change for `unstable_middleware` consumers**

  The `route.unstable_middleware` property is no longer supported in the return value from `route.lazy`. If you want to lazily load middleware, you must use `route.unstable_lazyMiddleware`.

## 7.4.0

### Patch Changes

- Fix root loader data on initial load redirects in SPA mode ([#13222](https://github.com/remix-run/react-router/pull/13222))
- Load ancestor pathless/index routes in lazy route discovery for upwards non-eager-discoery routing ([#13203](https://github.com/remix-run/react-router/pull/13203))
- Fix `shouldRevalidate` behavior for `clientLoader`-only routes in `ssr:true` apps ([#13221](https://github.com/remix-run/react-router/pull/13221))
- UNSTABLE: Fix `RequestHandler` `loadContext` parameter type when middleware is enabled ([#13204](https://github.com/remix-run/react-router/pull/13204))
- UNSTABLE: Update `Route.unstable_MiddlewareFunction` to have a return value of `Response | undefined` instead of `Response | void` becaue you should not return anything if you aren't returning the `Response` ([#13199](https://github.com/remix-run/react-router/pull/13199))
- UNSTABLE(BREAKING): If a middleware throws an error, ensure we only bubble the error itself via `next()` and are no longer leaking the `MiddlewareError` implementation detail ([#13180](https://github.com/remix-run/react-router/pull/13180))

## 7.3.0

### Minor Changes

- Add `fetcherKey` as a parameter to `patchRoutesOnNavigation` ([#13061](https://github.com/remix-run/react-router/pull/13061))

  - In framework mode, Lazy Route Discovery will now detect manifest version mismatches after a new deploy
  - On navigations to undiscovered routes, this mismatch will trigger a document reload of the destination path
  - On `fetcher` calls to undiscovered routes, this mismatch will trigger a document reload of the current path

### Patch Changes

- Skip resource route flow in dev server in SPA mode ([#13113](https://github.com/remix-run/react-router/pull/13113))

- Support middleware on routes (unstable) ([#12941](https://github.com/remix-run/react-router/pull/12941))

  Middleware is implemented behind a `future.unstable_middleware` flag. To enable, you must enable the flag and the types in your `react-router-config.ts` file:

  ```ts
  import type { Config } from "@react-router/dev/config";
  import type { Future } from "react-router";

  declare module "react-router" {
    interface Future {
      unstable_middleware: true; // üëà Enable middleware types
    }
  }

  export default {
    future: {
      unstable_middleware: true, // üëà Enable middleware
    },
  } satisfies Config;
  ```

  ‚ö†Ô∏è Middleware is unstable and should not be adopted in production. There is at least one known de-optimization in route module loading for `clientMiddleware` that we will be addressing this before a stable release.

  ‚ö†Ô∏è Enabling middleware contains a breaking change to the `context` parameter passed to your `loader`/`action` functions - see below for more information.

  Once enabled, routes can define an array of middleware functions that will run sequentially before route handlers run. These functions accept the same parameters as `loader`/`action` plus an additional `next` parameter to run the remaining data pipeline. This allows middlewares to perform logic before and after handlers execute.

  ```tsx
  // Framework mode
  export const unstable_middleware = [serverLogger, serverAuth]; // server
  export const unstable_clientMiddleware = [clientLogger]; // client

  // Library mode
  const routes = [
    {
      path: "/",
      // Middlewares are client-side for library mode SPA's
      unstable_middleware: [clientLogger, clientAuth],
      loader: rootLoader,
      Component: Root,
    },
  ];
  ```

  Here's a simple example of a client-side logging middleware that can be placed on the root route:

  ```tsx
  const clientLogger: Route.unstable_ClientMiddlewareFunction = async (
    { request },
    next
  ) => {
    let start = performance.now();

    // Run the remaining middlewares and all route loaders
    await next();

    let duration = performance.now() - start;
    console.log(`Navigated to ${request.url} (${duration}ms)`);
  };
  ```

  Note that in the above example, the `next`/`middleware` functions don't return anything. This is by design as on the client there is no "response" to send over the network like there would be for middlewares running on the server. The data is all handled behind the scenes by the stateful `router`.

  For a server-side middleware, the `next` function will return the HTTP `Response` that React Router will be sending across the wire, thus giving you a chance to make changes as needed. You may throw a new response to short circuit and respond immediately, or you may return a new or altered response to override the default returned by `next()`.

  ```tsx
  const serverLogger: Route.unstable_MiddlewareFunction = async (
    { request, params, context },
    next
  ) => {
    let start = performance.now();

    // üëá Grab the response here
    let res = await next();

    let duration = performance.now() - start;
    console.log(`Navigated to ${request.url} (${duration}ms)`);

    // üëá And return it here (optional if you don't modify the response)
    return res;
  };
  ```

  You can throw a `redirect` from a middleware to short circuit any remaining processing:

  ```tsx
  import { sessionContext } from "../context";
  const serverAuth: Route.unstable_MiddlewareFunction = (
    { request, params, context },
    next
  ) => {
    let session = context.get(sessionContext);
    let user = session.get("user");
    if (!user) {
      session.set("returnTo", request.url);
      throw redirect("/login", 302);
    }
  };
  ```

  _Note that in cases like this where you don't need to do any post-processing you don't need to call the `next` function or return a `Response`._

  Here's another example of using a server middleware to detect 404s and check the CMS for a redirect:

  ```tsx
  const redirects: Route.unstable_MiddlewareFunction = async ({
    request,
    next,
  }) => {
    // attempt to handle the request
    let res = await next();

    // if it's a 404, check the CMS for a redirect, do it last
    // because it's expensive
    if (res.status === 404) {
      let cmsRedirect = await checkCMSRedirects(request.url);
      if (cmsRedirect) {
        throw redirect(cmsRedirect, 302);
      }
    }

    return res;
  };
  ```

  **`context` parameter**

  When middleware is enabled, your application will use a different type of `context` parameter in your loaders and actions to provide better type safety. Instead of `AppLoadContext`, `context` will now be an instance of `ContextProvider` that you can use with type-safe contexts (similar to `React.createContext`):

  ```ts
  import { unstable_createContext } from "react-router";
  import { Route } from "./+types/root";
  import type { Session } from "./sessions.server";
  import { getSession } from "./sessions.server";

  let sessionContext = unstable_createContext<Session>();

  const sessionMiddleware: Route.unstable_MiddlewareFunction = ({
    context,
    request,
  }) => {
    let session = await getSession(request);
    context.set(sessionContext, session);
    //                          ^ must be of type Session
  };

  // ... then in some downstream middleware
  const loggerMiddleware: Route.unstable_MiddlewareFunction = ({
    context,
    request,
  }) => {
    let session = context.get(sessionContext);
    //  ^ typeof Session
    console.log(session.get("userId"), request.method, request.url);
  };

  // ... or some downstream loader
  export function loader({ context }: Route.LoaderArgs) {
    let session = context.get(sessionContext);
    let profile = await getProfile(session.get("userId"));
    return { profile };
  }
  ```

  If you are using a custom server with a `getLoadContext` function, the return value for initial context values passed from the server adapter layer is no longer an object and should now return an `unstable_InitialContext` (`Map<RouterContext, unknown>`):

  ```ts
  let adapterContext = unstable_createContext<MyAdapterContext>();

  function getLoadContext(req, res): unstable_InitialContext {
    let map = new Map();
    map.set(adapterContext, getAdapterContext(req));
    return map;
  }
  ```

- Fix types for loaderData and actionData that contained `Record`s ([#13139](https://github.com/remix-run/react-router/pull/13139))

  UNSTABLE(BREAKING):

  `unstable_SerializesTo` added a way to register custom serialization types in Single Fetch for other library and framework authors like Apollo.
  It was implemented with branded type whose branded property that was made optional so that casting arbitrary values was easy:

  ```ts
  // without the brand being marked as optional
  let x1 = 42 as unknown as unstable_SerializesTo<number>;
  //          ^^^^^^^^^^

  // with the brand being marked as optional
  let x2 = 42 as unstable_SerializesTo<number>;
  ```

  However, this broke type inference in `loaderData` and `actionData` for any `Record` types as those would now (incorrectly) match `unstable_SerializesTo`.
  This affected all users, not just those that depended on `unstable_SerializesTo`.
  To fix this, the branded property of `unstable_SerializesTo` is marked as required instead of optional.

  For library and framework authors using `unstable_SerializesTo`, you may need to add `as unknown` casts before casting to `unstable_SerializesTo`.

- \[REMOVE] Remove middleware depth logic and always call middlware for all matches ([#13172](https://github.com/remix-run/react-router/pull/13172))

- Fix single fetch `_root.data` requests when a `basename` is used ([#12898](https://github.com/remix-run/react-router/pull/12898))

- Add `context` support to client side data routers (unstable) ([#12941](https://github.com/remix-run/react-router/pull/12941))

  Your application `loader` and `action` functions on the client will now receive a `context` parameter. This is an instance of `unstable_RouterContextProvider` that you use with type-safe contexts (similar to `React.createContext`) and is most useful with the corresponding `middleware`/`clientMiddleware` API's:

  ```ts
  import { unstable_createContext } from "react-router";

  type User = {
    /*...*/
  };

  let userContext = unstable_createContext<User>();

  function sessionMiddleware({ context }) {
    let user = await getUser();
    context.set(userContext, user);
  }

  // ... then in some downstream loader
  function loader({ context }) {
    let user = context.get(userContext);
    let profile = await getProfile(user.id);
    return { profile };
  }
  ```

  Similar to server-side requests, a fresh `context` will be created per navigation (or `fetcher` call). If you have initial data you'd like to populate in the context for every request, you can provide an `unstable_getContext` function at the root of your app:

  - Library mode - `createBrowserRouter(routes, { unstable_getContext })`
  - Framework mode - `<HydratedRouter unstable_getContext>`

  This function should return an value of type `unstable_InitialContext` which is a `Map<unstable_RouterContext, unknown>` of context's and initial values:

  ```ts
  const loggerContext = unstable_createContext<(...args: unknown[]) => void>();

  function logger(...args: unknown[]) {
    console.log(new Date.toISOString(), ...args);
  }

  function unstable_getContext() {
    let map = new Map();
    map.set(loggerContext, logger);
    return map;
  }
  ```

## 7.2.0

### Minor Changes

- New type-safe `href` utility that guarantees links point to actual paths in your app ([#13012](https://github.com/remix-run/react-router/pull/13012))

  ```tsx
  import { href } from "react-router";

  export default function Component() {
    const link = href("/blog/:slug", { slug: "my-first-post" });
    return (
      <main>
        <Link to={href("/products/:id", { id: "asdf" })} />
        <NavLink to={href("/:lang?/about", { lang: "en" })} />
      </main>
    );
  }
  ```

### Patch Changes

- Fix typegen for repeated params ([#13012](https://github.com/remix-run/react-router/pull/13012))

  In React Router, path parameters are keyed by their name.
  So for a path pattern like `/a/:id/b/:id?/c/:id`, the last `:id` will set the value for `id` in `useParams` and the `params` prop.
  For example, `/a/1/b/2/c/3` will result in the value `{ id: 3 }` at runtime.

  Previously, generated types for params incorrectly modeled repeated params with an array.
  So `/a/1/b/2/c/3` generated a type like `{ id: [1,2,3] }`.

  To be consistent with runtime behavior, the generated types now correctly model the "last one wins" semantics of path parameters.
  So `/a/1/b/2/c/3` now generates a type like `{ id: 3 }`.

- Don't apply Single Fetch revalidation de-optimization when in SPA mode since there is no server HTTP request ([#12948](https://github.com/remix-run/react-router/pull/12948))

- Properly handle revalidations to across a prerender/SPA boundary ([#13021](https://github.com/remix-run/react-router/pull/13021))

  - In "hybrid" applications where some routes are pre-rendered and some are served from a SPA fallback, we need to avoid making `.data` requests if the path wasn't pre-rendered because the request will 404
  - We don't know all the pre-rendered paths client-side, however:
    - All `loader` data in `ssr:false` mode is static because it's generated at build time
    - A route must use a `clientLoader` to do anything dynamic
    - Therefore, if a route only has a `loader` and not a `clientLoader`, we disable revalidation by default because there is no new data to retrieve
    - We short circuit and skip single fetch `.data` request logic if there are no server loaders with `shouldLoad=true` in our single fetch `dataStrategy`
    - This ensures that the route doesn't cause a `.data` request that would 404 after a submission

- Error at build time in `ssr:false` + `prerender` apps for the edge case scenario of: ([#13021](https://github.com/remix-run/react-router/pull/13021))

  - A parent route has only a `loader` (does not have a `clientLoader`)
  - The parent route is pre-rendered
  - The parent route has children routes which are not prerendered
  - This means that when the child paths are loaded via the SPA fallback, the parent won't have any `loaderData` because there is no server on which to run the `loader`
  - This can be resolved by either adding a parent `clientLoader` or pre-rendering the child paths
  - If you add a `clientLoader`, calling the `serverLoader()` on non-prerendered paths will throw a 404

- Add unstable support for splitting route modules in framework mode via `future.unstable_splitRouteModules` ([#11871](https://github.com/remix-run/react-router/pull/11871))

- Add `unstable_SerializesTo` brand type for library authors to register types serializable by React Router's streaming format (`turbo-stream`) ([`ab5b05b02`](https://github.com/remix-run/react-router/commit/ab5b05b02f99f062edb3c536c392197c88eb6c77))

- Align dev server behavior with static file server behavior when `ssr:false` is set ([#12948](https://github.com/remix-run/react-router/pull/12948))

  - When no `prerender` config exists, only SSR down to the root `HydrateFallback` (SPA Mode)
  - When a `prerender` config exists but the current path is not prerendered, only SSR down to the root `HydrateFallback` (SPA Fallback)
  - Return a 404 on `.data` requests to non-pre-rendered paths

- Improve prefetch performance of CSS side effects in framework mode ([#12889](https://github.com/remix-run/react-router/pull/12889))

- Disable Lazy Route Discovery for all `ssr:false` apps and not just "SPA Mode" because there is no runtime server to serve the search-param-configured `__manifest` requests ([#12894](https://github.com/remix-run/react-router/pull/12894))

  - We previously only disabled this for "SPA Mode" which is `ssr:false` and no `prerender` config but we realized it should apply to all `ssr:false` apps, including those prerendering multiple pages
  - In those `prerender` scenarios we would prerender the `/__manifest` file assuming the static file server would serve it but that makes some unneccesary assumptions about the static file server behaviors

- Properly handle interrupted manifest requests in lazy route discovery ([#12915](https://github.com/remix-run/react-router/pull/12915))

## 7.1.5

### Patch Changes

- Fix regression introduced in `7.1.4` via [#12800](https://github.com/remix-run/react-router/pull/12800) that caused issues navigating to hash routes inside splat routes for applications using Lazy Route Discovery (`patchRoutesOnNavigation`) ([#12927](https://github.com/remix-run/react-router/pull/12927))

## 7.1.4

### Patch Changes

- Internal reorg to clean up some duplicated route module types ([#12799](https://github.com/remix-run/react-router/pull/12799))
- Properly handle status codes that cannot have a body in single fetch responses (204, etc.) ([#12760](https://github.com/remix-run/react-router/pull/12760))
- Stop erroring on resource routes that return raw strings/objects and instead serialize them as `text/plain` or `application/json` responses ([#12848](https://github.com/remix-run/react-router/pull/12848))
  - This only applies when accessed as a resource route without the `.data` extension
  - When accessed from a Single Fetch `.data` request, they will still be encoded via `turbo-stream`
- Optimize Lazy Route Discovery path discovery to favor a single `querySelectorAll` call at the `body` level instead of many calls at the sub-tree level ([#12731](https://github.com/remix-run/react-router/pull/12731))
- Properly bubble headers as `errorHeaders` when throwing a `data()` result ([#12846](https://github.com/remix-run/react-router/pull/12846))
  - Avoid duplication of `Set-Cookie` headers could be duplicated if also returned from `headers`
- Optimize route matching by skipping redundant `matchRoutes` calls when possible ([#12800](https://github.com/remix-run/react-router/pull/12800))

## 7.1.3

_No changes_

## 7.1.2

### Patch Changes

- Fix issue with fetcher data cleanup in the data layer on fetcher unmount ([#12681](https://github.com/remix-run/react-router/pull/12681))
- Do not rely on `symbol` for filtering out `redirect` responses from loader data ([#12694](https://github.com/remix-run/react-router/pull/12694))

  Previously, some projects were getting type checking errors like:

  ```ts
  error TS4058: Return type of exported function has or is using name 'redirectSymbol' from external module "node_modules/..." but cannot be named.
  ```

  Now that `symbol`s are not used for the `redirect` response type, these errors should no longer be present.

## 7.1.1

_No changes_

## 7.1.0

### Patch Changes

- Throw unwrapped single fetch redirect to align with pre-single fetch behavior ([#12506](https://github.com/remix-run/react-router/pull/12506))
- Ignore redirects when inferring loader data types ([#12527](https://github.com/remix-run/react-router/pull/12527))
- Remove `<Link prefetch>` warning which suffers from false positives in a lazy route discovery world ([#12485](https://github.com/remix-run/react-router/pull/12485))

## 7.0.2

### Patch Changes

- temporarily only use one build in export map so packages can have a peer dependency on react router ([#12437](https://github.com/remix-run/react-router/pull/12437))
- Generate wide `matches` and `params` types for current route and child routes ([#12397](https://github.com/remix-run/react-router/pull/12397))

  At runtime, `matches` includes child route matches and `params` include child route path parameters.
  But previously, we only generated types for parent routes in `matches`; for `params`, we only considered the parent routes and the current route.
  To align our generated types more closely to the runtime behavior, we now generate more permissive, wider types when accessing child route information.

## 7.0.1

_No changes_

## 7.0.0

### Major Changes

- Remove the original `defer` implementation in favor of using raw promises via single fetch and `turbo-stream`. This removes these exports from React Router: ([#11744](https://github.com/remix-run/react-router/pull/11744))

  - `defer`
  - `AbortedDeferredError`
  - `type TypedDeferredData`
  - `UNSAFE_DeferredData`
  - `UNSAFE_DEFERRED_SYMBOL`,

- - Collapse `@remix-run/router` into `react-router` ([#11505](https://github.com/remix-run/react-router/pull/11505))
  - Collapse `react-router-dom` into `react-router`
  - Collapse `@remix-run/server-runtime` into `react-router`
  - Collapse `@remix-run/testing` into `react-router`

- Remove single fetch future flag. ([#11522](https://github.com/remix-run/react-router/pull/11522))

- Drop support for Node 16, React Router SSR now requires Node 18 or higher ([#11391](https://github.com/remix-run/react-router/pull/11391))

- Remove `future.v7_startTransition` flag ([#11696](https://github.com/remix-run/react-router/pull/11696))

- - Expose the underlying router promises from the following APIs for compsition in React 19 APIs: ([#11521](https://github.com/remix-run/react-router/pull/11521))
    - `useNavigate()`
    - `useSubmit`
    - `useFetcher().load`
    - `useFetcher().submit`
    - `useRevalidator.revalidate`

- Remove `future.v7_normalizeFormMethod` future flag ([#11697](https://github.com/remix-run/react-router/pull/11697))

- For Remix consumers migrating to React Router, the `crypto` global from the [Web Crypto API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API) is now required when using cookie and session APIs. This means that the following APIs are provided from `react-router` rather than platform-specific packages: ([#11837](https://github.com/remix-run/react-router/pull/11837))

  - `createCookie`
  - `createCookieSessionStorage`
  - `createMemorySessionStorage`
  - `createSessionStorage`

  For consumers running older versions of Node, the `installGlobals` function from `@remix-run/node` has been updated to define `globalThis.crypto`, using [Node's `require('node:crypto').webcrypto` implementation.](https://nodejs.org/api/webcrypto.html)

  Since platform-specific packages no longer need to implement this API, the following low-level APIs have been removed:

  - `createCookieFactory`
  - `createSessionStorageFactory`
  - `createCookieSessionStorageFactory`
  - `createMemorySessionStorageFactory`

- Imports/Exports cleanup ([#11840](https://github.com/remix-run/react-router/pull/11840))

  - Removed the following exports that were previously public API from `@remix-run/router`
    - types
      - `AgnosticDataIndexRouteObject`
      - `AgnosticDataNonIndexRouteObject`
      - `AgnosticDataRouteMatch`
      - `AgnosticDataRouteObject`
      - `AgnosticIndexRouteObject`
      - `AgnosticNonIndexRouteObject`
      - `AgnosticRouteMatch`
      - `AgnosticRouteObject`
      - `TrackedPromise`
      - `unstable_AgnosticPatchRoutesOnMissFunction`
      - `Action` -> exported as `NavigationType` via `react-router`
      - `Router` exported as `DataRouter` to differentiate from RR's `<Router>`
    - API
      - `getToPathname` (`@private`)
      - `joinPaths` (`@private`)
      - `normalizePathname` (`@private`)
      - `resolveTo` (`@private`)
      - `stripBasename` (`@private`)
      - `createBrowserHistory` -> in favor of `createBrowserRouter`
      - `createHashHistory` -> in favor of `createHashRouter`
      - `createMemoryHistory` -> in favor of `createMemoryRouter`
      - `createRouter`
      - `createStaticHandler` -> in favor of wrapper `createStaticHandler` in RR Dom
      - `getStaticContextFromError`
  - Removed the following exports that were previously public API from `react-router`
    - `Hash`
    - `Pathname`
    - `Search`

- update minimum node version to 18 ([#11690](https://github.com/remix-run/react-router/pull/11690))

- Remove `future.v7_prependBasename` from the ionternalized `@remix-run/router` package ([#11726](https://github.com/remix-run/react-router/pull/11726))

- Migrate Remix type generics to React Router ([#12180](https://github.com/remix-run/react-router/pull/12180))

  - These generics are provided for Remix v2 migration purposes
  - These generics and the APIs they exist on should be considered informally deprecated in favor of the new `Route.*` types
  - Anyone migrating from React Router v6 should probably not leverage these new generics and should migrate straight to the `Route.*` types
  - For React Router v6 users, these generics are new and should not impact your app, with one exception
    - `useFetcher` previously had an optional generic (used primarily by Remix v2) that expected the data type
    - This has been updated in v7 to expect the type of the function that generates the data (i.e., `typeof loader`/`typeof action`)
    - Therefore, you should update your usages:
      - ‚ùå `useFetcher<LoaderData>()`
      - ‚úÖ `useFetcher<typeof loader>()`

- Remove `future.v7_throwAbortReason` from internalized `@remix-run/router` package ([#11728](https://github.com/remix-run/react-router/pull/11728))

- Add `exports` field to all packages ([#11675](https://github.com/remix-run/react-router/pull/11675))

- node package no longer re-exports from react-router ([#11702](https://github.com/remix-run/react-router/pull/11702))

- renamed RemixContext to FrameworkContext ([#11705](https://github.com/remix-run/react-router/pull/11705))

- updates the minimum React version to 18 ([#11689](https://github.com/remix-run/react-router/pull/11689))

- PrefetchPageDescriptor replaced by PageLinkDescriptor ([#11960](https://github.com/remix-run/react-router/pull/11960))

- - Consolidate types previously duplicated across `@remix-run/router`, `@remix-run/server-runtime`, and `@remix-run/react` now that they all live in `react-router` ([#12177](https://github.com/remix-run/react-router/pull/12177))
    - Examples: `LoaderFunction`, `LoaderFunctionArgs`, `ActionFunction`, `ActionFunctionArgs`, `DataFunctionArgs`, `RouteManifest`, `LinksFunction`, `Route`, `EntryRoute`
    - The `RouteManifest` type used by the "remix" code is now slightly stricter because it is using the former `@remix-run/router` `RouteManifest`
      - `Record<string, Route> -> Record<string, Route | undefined>`
    - Removed `AppData` type in favor of inlining `unknown` in the few locations it was used
    - Removed `ServerRuntimeMeta*` types in favor of the `Meta*` types they were duplicated from

- - Remove the `future.v7_partialHydration` flag ([#11725](https://github.com/remix-run/react-router/pull/11725))
    - This also removes the `<RouterProvider fallbackElement>` prop
      - To migrate, move the `fallbackElement` to a `hydrateFallbackElement`/`HydrateFallback` on your root route
    - Also worth nothing there is a related breaking changer with this future flag:
      - Without `future.v7_partialHydration` (when using `fallbackElement`), `state.navigation` was populated during the initial load
      - With `future.v7_partialHydration`, `state.navigation` remains in an `"idle"` state during the initial load

- Remove `v7_relativeSplatPath` future flag ([#11695](https://github.com/remix-run/react-router/pull/11695))

- Drop support for Node 18, update minimum Node vestion to 20 ([#12171](https://github.com/remix-run/react-router/pull/12171))

  - Remove `installGlobals()` as this should no longer be necessary

- Remove remaining future flags ([#11820](https://github.com/remix-run/react-router/pull/11820))

  - React Router `v7_skipActionErrorRevalidation`
  - Remix `v3_fetcherPersist`, `v3_relativeSplatPath`, `v3_throwAbortReason`

- rename createRemixStub to createRoutesStub ([#11692](https://github.com/remix-run/react-router/pull/11692))

- Remove `@remix-run/router` deprecated `detectErrorBoundary` option in favor of `mapRouteProperties` ([#11751](https://github.com/remix-run/react-router/pull/11751))

- Add `react-router/dom` subpath export to properly enable `react-dom` as an optional `peerDependency` ([#11851](https://github.com/remix-run/react-router/pull/11851))

  - This ensures that we don't blindly `import ReactDOM from "react-dom"` in `<RouterProvider>` in order to access `ReactDOM.flushSync()`, since that would break `createMemoryRouter` use cases in non-DOM environments
  - DOM environments should import from `react-router/dom` to get the proper component that makes `ReactDOM.flushSync()` available:
    - If you are using the Vite plugin, use this in your `entry.client.tsx`:
      - `import { HydratedRouter } from 'react-router/dom'`
    - If you are not using the Vite plugin and are manually calling `createBrowserRouter`/`createHashRouter`:
      - `import { RouterProvider } from "react-router/dom"`

- Remove `future.v7_fetcherPersist` flag ([#11731](https://github.com/remix-run/react-router/pull/11731))

- Update `cookie` dependency to `^1.0.1` - please see the [release notes](https://github.com/jshttp/cookie/releases) for any breaking changes ([#12172](https://github.com/remix-run/react-router/pull/12172))

### Minor Changes

- - Add support for `prerender` config in the React Router vite plugin, to support existing SSG use-cases ([#11539](https://github.com/remix-run/react-router/pull/11539))
    - You can use the `prerender` config to pre-render your `.html` and `.data` files at build time and then serve them statically at runtime (either from a running server or a CDN)
    - `prerender` can either be an array of string paths, or a function (sync or async) that returns an array of strings so that you can dynamically generate the paths by talking to your CMS, etc.

  ```ts
  // react-router.config.ts
  import type { Config } from "@react-router/dev/config";

  export default {
    async prerender() {
      let slugs = await fakeGetSlugsFromCms();
      // Prerender these paths into `.html` files at build time, and `.data`
      // files if they have loaders
      return ["/", "/about", ...slugs.map((slug) => `/product/${slug}`)];
    },
  } satisfies Config;

  async function fakeGetSlugsFromCms() {
    await new Promise((r) => setTimeout(r, 1000));
    return ["shirt", "hat"];
  }
  ```

- Params, loader data, and action data as props for route component exports ([#11961](https://github.com/remix-run/react-router/pull/11961))

  ```tsx
  export default function Component({ params, loaderData, actionData }) {}

  export function HydrateFallback({ params }) {}
  export function ErrorBoundary({ params, loaderData, actionData }) {}
  ```

- Remove duplicate `RouterProvider` impliementations ([#11679](https://github.com/remix-run/react-router/pull/11679))

- ### Typesafety improvements ([#12019](https://github.com/remix-run/react-router/pull/12019))

  React Router now generates types for each of your route modules.
  You can access those types by importing them from `./+types.<route filename without extension>`.
  For example:

  ```ts
  // app/routes/product.tsx
  import type * as Route from "./+types.product";

  export function loader({ params }: Route.LoaderArgs) {}

  export default function Component({ loaderData }: Route.ComponentProps) {}
  ```

  This initial implementation targets type inference for:

  - `Params` : Path parameters from your routing config in `routes.ts` including file-based routing
  - `LoaderData` : Loader data from `loader` and/or `clientLoader` within your route module
  - `ActionData` : Action data from `action` and/or `clientAction` within your route module

  In the future, we plan to add types for the rest of the route module exports: `meta`, `links`, `headers`, `shouldRevalidate`, etc.
  We also plan to generate types for typesafe `Link`s:

  ```tsx
  <Link to="/products/:id" params={{ id: 1 }} />
  //        ^^^^^^^^^^^^^          ^^^^^^^^^
  // typesafe `to` and `params` based on the available routes in your app
  ```

  Check out our docs for more:

  - [_Explanations > Type Safety_](https://reactrouter.com/dev/guides/explanation/type-safety)
  - [_How-To > Setting up type safety_](https://reactrouter.com/dev/guides/how-to/setting-up-type-safety)

- Stabilize `unstable_dataStrategy` ([#11969](https://github.com/remix-run/react-router/pull/11969))

- Stabilize `unstable_patchRoutesOnNavigation` ([#11970](https://github.com/remix-run/react-router/pull/11970))

### Patch Changes

- No changes ([`506329c4e`](https://github.com/remix-run/react-router/commit/506329c4e2e7aba9837cbfa44df6103b49423745))

- chore: re-enable development warnings through a `development` exports condition. ([#12269](https://github.com/remix-run/react-router/pull/12269))

- Remove unstable upload handler. ([#12015](https://github.com/remix-run/react-router/pull/12015))

- Remove unneeded dependency on @web3-storage/multipart-parser ([#12274](https://github.com/remix-run/react-router/pull/12274))

- Fix redirects returned from loaders/actions using `data()` ([#12021](https://github.com/remix-run/react-router/pull/12021))

- fix(react-router): (v7) fix static prerender of non-ascii characters ([#12161](https://github.com/remix-run/react-router/pull/12161))

- Replace `substr` with `substring` ([#12080](https://github.com/remix-run/react-router/pull/12080))

- Remove the deprecated `json` utility ([#12146](https://github.com/remix-run/react-router/pull/12146))

  - You can use [`Response.json`](https://developer.mozilla.org/en-US/docs/Web/API/Response/json_static) if you still need to construct JSON responses in your app

- Remove unneeded dependency on source-map ([#12275](https://github.com/remix-run/react-router/pull/12275))

## 6.28.0

### Minor Changes

- - Log deprecation warnings for v7 flags ([#11750](https://github.com/remix-run/react-router/pull/11750))
  - Add deprecation warnings to `json`/`defer` in favor of returning raw objects
    - These methods will be removed in React Router v7

### Patch Changes

- Update JSDoc URLs for new website structure (add /v6/ segment) ([#12141](https://github.com/remix-run/react-router/pull/12141))
- Updated dependencies:
  - `@remix-run/router@1.21.0`

## 6.27.0

### Minor Changes

- Stabilize `unstable_patchRoutesOnNavigation` ([#11973](https://github.com/remix-run/react-router/pull/11973))
  - Add new `PatchRoutesOnNavigationFunctionArgs` type for convenience ([#11967](https://github.com/remix-run/react-router/pull/11967))
- Stabilize `unstable_dataStrategy` ([#11974](https://github.com/remix-run/react-router/pull/11974))
- Stabilize the `unstable_flushSync` option for navigations and fetchers ([#11989](https://github.com/remix-run/react-router/pull/11989))
- Stabilize the `unstable_viewTransition` option for navigations and the corresponding `unstable_useViewTransitionState` hook ([#11989](https://github.com/remix-run/react-router/pull/11989))

### Patch Changes

- Fix bug when submitting to the current contextual route (parent route with an index child) when an `?index` param already exists from a prior submission ([#12003](https://github.com/remix-run/react-router/pull/12003))

- Fix `useFormAction` bug - when removing `?index` param it would not keep other non-Remix `index` params ([#12003](https://github.com/remix-run/react-router/pull/12003))

- Fix types for `RouteObject` within `PatchRoutesOnNavigationFunction`'s `patch` method so it doesn't expect agnostic route objects passed to `patch` ([#11967](https://github.com/remix-run/react-router/pull/11967))

- Updated dependencies:
  - `@remix-run/router@1.20.0`

## 6.26.2

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.19.2`

## 6.26.1

### Patch Changes

- Rename `unstable_patchRoutesOnMiss` to `unstable_patchRoutesOnNavigation` to match new behavior ([#11888](https://github.com/remix-run/react-router/pull/11888))
- Updated dependencies:
  - `@remix-run/router@1.19.1`

## 6.26.0

### Minor Changes

- Add a new `replace(url, init?)` alternative to `redirect(url, init?)` that performs a `history.replaceState` instead of a `history.pushState` on client-side navigation redirects ([#11811](https://github.com/remix-run/react-router/pull/11811))

### Patch Changes

- Fix initial hydration behavior when using `future.v7_partialHydration` along with `unstable_patchRoutesOnMiss` ([#11838](https://github.com/remix-run/react-router/pull/11838))
  - During initial hydration, `router.state.matches` will now include any partial matches so that we can render ancestor `HydrateFallback` components
- Updated dependencies:
  - `@remix-run/router@1.19.0`

## 6.25.1

No significant changes to this package were made in this release. [See the repo `CHANGELOG.md`](https://github.com/remix-run/react-router/blob/main/CHANGELOG.md) for an overview of all changes in v6.25.1.

## 6.25.0

### Minor Changes

- Stabilize `future.unstable_skipActionErrorRevalidation` as `future.v7_skipActionErrorRevalidation` ([#11769](https://github.com/remix-run/react-router/pull/11769))
  - When this flag is enabled, actions will not automatically trigger a revalidation if they return/throw a `Response` with a `4xx`/`5xx` status code
  - You may still opt-into revalidation via `shouldRevalidate`
  - This also changes `shouldRevalidate`'s `unstable_actionStatus` parameter to `actionStatus`

### Patch Changes

- Fix regression and properly decode paths inside `useMatch` so matches/params reflect decoded params ([#11789](https://github.com/remix-run/react-router/pull/11789))
- Updated dependencies:
  - `@remix-run/router@1.18.0`

## 6.24.1

### Patch Changes

- When using `future.v7_relativeSplatPath`, properly resolve relative paths in splat routes that are children of pathless routes ([#11633](https://github.com/remix-run/react-router/pull/11633))
- Updated dependencies:
  - `@remix-run/router@1.17.1`

## 6.24.0

### Minor Changes

- Add support for Lazy Route Discovery (a.k.a. Fog of War) ([#11626](https://github.com/remix-run/react-router/pull/11626))
  - RFC: <https://github.com/remix-run/react-router/discussions/11113>
  - `unstable_patchRoutesOnMiss` docs: <https://reactrouter.com/v6/routers/create-browser-router>

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.17.0`

## 6.23.1

### Patch Changes

- allow undefined to be resolved with `<Await>` ([#11513](https://github.com/remix-run/react-router/pull/11513))
- Updated dependencies:
  - `@remix-run/router@1.16.1`

## 6.23.0

### Minor Changes

- Add a new `unstable_dataStrategy` configuration option ([#11098](https://github.com/remix-run/react-router/pull/11098))
  - This option allows Data Router applications to take control over the approach for executing route loaders and actions
  - The default implementation is today's behavior, to fetch all loaders in parallel, but this option allows users to implement more advanced data flows including Remix single-fetch, middleware/context APIs, automatic loader caching, and more

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.16.0`

## 6.22.3

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.15.3`

## 6.22.2

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.15.2`

## 6.22.1

### Patch Changes

- Fix encoding/decoding issues with pre-encoded dynamic parameter values ([#11199](https://github.com/remix-run/react-router/pull/11199))
- Updated dependencies:
  - `@remix-run/router@1.15.1`

## 6.22.0

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.15.0`

## 6.21.3

### Patch Changes

- Remove leftover `unstable_` prefix from `Blocker`/`BlockerFunction` types ([#11187](https://github.com/remix-run/react-router/pull/11187))

## 6.21.2

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.14.2`

## 6.21.1

### Patch Changes

- Fix bug with `route.lazy` not working correctly on initial SPA load when `v7_partialHydration` is specified ([#11121](https://github.com/remix-run/react-router/pull/11121))
- Updated dependencies:
  - `@remix-run/router@1.14.1`

## 6.21.0

### Minor Changes

- Add a new `future.v7_relativeSplatPath` flag to implement a breaking bug fix to relative routing when inside a splat route. ([#11087](https://github.com/remix-run/react-router/pull/11087))

  This fix was originally added in [#10983](https://github.com/remix-run/react-router/issues/10983) and was later reverted in [#11078](https://github.com/remix-run/react-router/pull/11078) because it was determined that a large number of existing applications were relying on the buggy behavior (see [#11052](https://github.com/remix-run/react-router/issues/11052))

  **The Bug**
  The buggy behavior is that without this flag, the default behavior when resolving relative paths is to _ignore_ any splat (`*`) portion of the current route path.

  **The Background**
  This decision was originally made thinking that it would make the concept of nested different sections of your apps in `<Routes>` easier if relative routing would _replace_ the current splat:

  ```jsx
  <BrowserRouter>
    <Routes>
      <Route path="/" element={<Home />} />
      <Route path="dashboard/*" element={<Dashboard />} />
    </Routes>
  </BrowserRouter>
  ```

  Any paths like `/dashboard`, `/dashboard/team`, `/dashboard/projects` will match the `Dashboard` route. The dashboard component itself can then render nested `<Routes>`:

  ```jsx
  function Dashboard() {
    return (
      <div>
        <h2>Dashboard</h2>
        <nav>
          <Link to="/">Dashboard Home</Link>
          <Link to="team">Team</Link>
          <Link to="projects">Projects</Link>
        </nav>

        <Routes>
          <Route path="/" element={<DashboardHome />} />
          <Route path="team" element={<DashboardTeam />} />
          <Route path="projects" element={<DashboardProjects />} />
        </Routes>
      </div>
    );
  }
  ```

  Now, all links and route paths are relative to the router above them. This makes code splitting and compartmentalizing your app really easy. You could render the `Dashboard` as its own independent app, or embed it into your large app without making any changes to it.

  **The Problem**

  The problem is that this concept of ignoring part of a path breaks a lot of other assumptions in React Router - namely that `"."` always means the current location pathname for that route. When we ignore the splat portion, we start getting invalid paths when using `"."`:

  ```jsx
  // If we are on URL /dashboard/team, and we want to link to /dashboard/team:
  function DashboardTeam() {
    // ‚ùå This is broken and results in <a href="/dashboard">
    return <Link to=".">A broken link to the Current URL</Link>;

    // ‚úÖ This is fixed but super unintuitive since we're already at /dashboard/team!
    return <Link to="./team">A broken link to the Current URL</Link>;
  }
  ```

  We've also introduced an issue that we can no longer move our `DashboardTeam` component around our route hierarchy easily - since it behaves differently if we're underneath a non-splat route, such as `/dashboard/:widget`. Now, our `"."` links will, properly point to ourself _inclusive of the dynamic param value_ so behavior will break from it's corresponding usage in a `/dashboard/*` route.

  Even worse, consider a nested splat route configuration:

  ```jsx
  <BrowserRouter>
    <Routes>
      <Route path="dashboard">
        <Route path="*" element={<Dashboard />} />
      </Route>
    </Routes>
  </BrowserRouter>
  ```

  Now, a `<Link to=".">` and a `<Link to="..">` inside the `Dashboard` component go to the same place! That is definitely not correct!

  Another common issue arose in Data Routers (and Remix) where any `<Form>` should post to it's own route `action` if you the user doesn't specify a form action:

  ```jsx
  let router = createBrowserRouter({
    path: "/dashboard",
    children: [
      {
        path: "*",
        action: dashboardAction,
        Component() {
          // ‚ùå This form is broken!  It throws a 405 error when it submits because
          // it tries to submit to /dashboard (without the splat value) and the parent
          // `/dashboard` route doesn't have an action
          return <Form method="post">...</Form>;
        },
      },
    ],
  });
  ```

  This is just a compounded issue from the above because the default location for a `Form` to submit to is itself (`"."`) - and if we ignore the splat portion, that now resolves to the parent route.

  **The Solution**
  If you are leveraging this behavior, it's recommended to enable the future flag, move your splat to it's own route, and leverage `../` for any links to "sibling" pages:

  ```jsx
  <BrowserRouter>
    <Routes>
      <Route path="dashboard">
        <Route index path="*" element={<Dashboard />} />
      </Route>
    </Routes>
  </BrowserRouter>

  function Dashboard() {
    return (
      <div>
        <h2>Dashboard</h2>
        <nav>
          <Link to="..">Dashboard Home</Link>
          <Link to="../team">Team</Link>
          <Link to="../projects">Projects</Link>
        </nav>

        <Routes>
          <Route path="/" element={<DashboardHome />} />
          <Route path="team" element={<DashboardTeam />} />
          <Route path="projects" element={<DashboardProjects />} />
        </Router>
      </div>
    );
  }
  ```

  This way, `.` means "the full current pathname for my route" in all cases (including static, dynamic, and splat routes) and `..` always means "my parents pathname".

### Patch Changes

- Properly handle falsy error values in ErrorBoundary's ([#11071](https://github.com/remix-run/react-router/pull/11071))
- Updated dependencies:
  - `@remix-run/router@1.14.0`

## 6.20.1

### Patch Changes

- Revert the `useResolvedPath` fix for splat routes due to a large number of applications that were relying on the buggy behavior (see <https://github.com/remix-run/react-router/issues/11052#issuecomment-1836589329>). We plan to re-introduce this fix behind a future flag in the next minor version. ([#11078](https://github.com/remix-run/react-router/pull/11078))
- Updated dependencies:
  - `@remix-run/router@1.13.1`

## 6.20.0

### Minor Changes

- Export the `PathParam` type from the public API ([#10719](https://github.com/remix-run/react-router/pull/10719))

### Patch Changes

- Fix bug with `resolveTo` in splat routes ([#11045](https://github.com/remix-run/react-router/pull/11045))
  - This is a follow up to [#10983](https://github.com/remix-run/react-router/pull/10983) to handle the few other code paths using `getPathContributingMatches`
  - This removes the `UNSAFE_getPathContributingMatches` export from `@remix-run/router` since we no longer need this in the `react-router`/`react-router-dom` layers
- Updated dependencies:
  - `@remix-run/router@1.13.0`

## 6.19.0

### Minor Changes

- Add `unstable_flushSync` option to `useNavigate`/`useSumbit`/`fetcher.load`/`fetcher.submit` to opt-out of `React.startTransition` and into `ReactDOM.flushSync` for state updates ([#11005](https://github.com/remix-run/react-router/pull/11005))
- Remove the `unstable_` prefix from the [`useBlocker`](https://reactrouter.com/v6/hooks/use-blocker) hook as it's been in use for enough time that we are confident in the API. We do not plan to remove the prefix from `unstable_usePrompt` due to differences in how browsers handle `window.confirm` that prevent React Router from guaranteeing consistent/correct behavior. ([#10991](https://github.com/remix-run/react-router/pull/10991))

### Patch Changes

- Fix `useActionData` so it returns proper contextual action data and not _any_ action data in the tree ([#11023](https://github.com/remix-run/react-router/pull/11023))

- Fix bug in `useResolvedPath` that would cause `useResolvedPath(".")` in a splat route to lose the splat portion of the URL path. ([#10983](https://github.com/remix-run/react-router/pull/10983))

  - ‚ö†Ô∏è This fixes a quite long-standing bug specifically for `"."` paths inside a splat route which incorrectly dropped the splat portion of the URL. If you are relative routing via `"."` inside a splat route in your application you should double check that your logic is not relying on this buggy behavior and update accordingly.

- Updated dependencies:
  - `@remix-run/router@1.12.0`

## 6.18.0

### Patch Changes

- Fix the `future` prop on `BrowserRouter`, `HashRouter` and `MemoryRouter` so that it accepts a `Partial<FutureConfig>` instead of requiring all flags to be included. ([#10962](https://github.com/remix-run/react-router/pull/10962))
- Updated dependencies:
  - `@remix-run/router@1.11.0`

## 6.17.0

### Patch Changes

- Fix `RouterProvider` `future` prop type to be a `Partial<FutureConfig>` so that not all flags must be specified ([#10900](https://github.com/remix-run/react-router/pull/10900))
- Updated dependencies:
  - `@remix-run/router@1.10.0`

## 6.16.0

### Minor Changes

- In order to move towards stricter TypeScript support in the future, we're aiming to replace current usages of `any` with `unknown` on exposed typings for user-provided data. To do this in Remix v2 without introducing breaking changes in React Router v6, we have added generics to a number of shared types. These continue to default to `any` in React Router and are overridden with `unknown` in Remix. In React Router v7 we plan to move these to `unknown` as a breaking change. ([#10843](https://github.com/remix-run/react-router/pull/10843))
  - `Location` now accepts a generic for the `location.state` value
  - `ActionFunctionArgs`/`ActionFunction`/`LoaderFunctionArgs`/`LoaderFunction` now accept a generic for the `context` parameter (only used in SSR usages via `createStaticHandler`)
  - The return type of `useMatches` (now exported as `UIMatch`) accepts generics for `match.data` and `match.handle` - both of which were already set to `unknown`
- Move the `@private` class export `ErrorResponse` to an `UNSAFE_ErrorResponseImpl` export since it is an implementation detail and there should be no construction of `ErrorResponse` instances in userland. This frees us up to export a `type ErrorResponse` which correlates to an instance of the class via `InstanceType`. Userland code should only ever be using `ErrorResponse` as a type and should be type-narrowing via `isRouteErrorResponse`. ([#10811](https://github.com/remix-run/react-router/pull/10811))
- Export `ShouldRevalidateFunctionArgs` interface ([#10797](https://github.com/remix-run/react-router/pull/10797))
- Removed private/internal APIs only required for the Remix v1 backwards compatibility layer and no longer needed in Remix v2 (`_isFetchActionRedirect`, `_hasFetcherDoneAnything`) ([#10715](https://github.com/remix-run/react-router/pull/10715))

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.9.0`

## 6.15.0

### Minor Changes

- Add's a new `redirectDocument()` function which allows users to specify that a redirect from a `loader`/`action` should trigger a document reload (via `window.location`) instead of attempting to navigate to the redirected location via React Router ([#10705](https://github.com/remix-run/react-router/pull/10705))

### Patch Changes

- Ensure `useRevalidator` is referentially stable across re-renders if revalidations are not actively occurring ([#10707](https://github.com/remix-run/react-router/pull/10707))
- Updated dependencies:
  - `@remix-run/router@1.8.0`

## 6.14.2

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.7.2`

## 6.14.1

### Patch Changes

- Fix loop in `unstable_useBlocker` when used with an unstable blocker function ([#10652](https://github.com/remix-run/react-router/pull/10652))
- Fix issues with reused blockers on subsequent navigations ([#10656](https://github.com/remix-run/react-router/pull/10656))
- Updated dependencies:
  - `@remix-run/router@1.7.1`

## 6.14.0

### Patch Changes

- Strip `basename` from locations provided to `unstable_useBlocker` functions to match `useLocation` ([#10573](https://github.com/remix-run/react-router/pull/10573))
- Fix `generatePath` when passed a numeric `0` value parameter ([#10612](https://github.com/remix-run/react-router/pull/10612))
- Fix `unstable_useBlocker` key issues in `StrictMode` ([#10573](https://github.com/remix-run/react-router/pull/10573))
- Fix `tsc --skipLibCheck:false` issues on React 17 ([#10622](https://github.com/remix-run/react-router/pull/10622))
- Upgrade `typescript` to 5.1 ([#10581](https://github.com/remix-run/react-router/pull/10581))
- Updated dependencies:
  - `@remix-run/router@1.7.0`

## 6.13.0

### Minor Changes

- Move [`React.startTransition`](https://react.dev/reference/react/startTransition) usage behind a [future flag](https://reactrouter.com/v6/guides/api-development-strategy) to avoid issues with existing incompatible `Suspense` usages. We recommend folks adopting this flag to be better compatible with React concurrent mode, but if you run into issues you can continue without the use of `startTransition` until v7. Issues usually boils down to creating net-new promises during the render cycle, so if you run into issues you should either lift your promise creation out of the render cycle or put it behind a `useMemo`. ([#10596](https://github.com/remix-run/react-router/pull/10596))

  Existing behavior will no longer include `React.startTransition`:

  ```jsx
  <BrowserRouter>
    <Routes>{/*...*/}</Routes>
  </BrowserRouter>

  <RouterProvider router={router} />
  ```

  If you wish to enable `React.startTransition`, pass the future flag to your component:

  ```jsx
  <BrowserRouter future={{ v7_startTransition: true }}>
    <Routes>{/*...*/}</Routes>
  </BrowserRouter>

  <RouterProvider router={router} future={{ v7_startTransition: true }}/>
  ```

### Patch Changes

- Work around webpack/terser `React.startTransition` minification bug in production mode ([#10588](https://github.com/remix-run/react-router/pull/10588))

## 6.12.1

> \[!WARNING]
> Please use version `6.13.0` or later instead of `6.12.1`. This version suffers from a `webpack`/`terser` minification issue resulting in invalid minified code in your resulting production bundles which can cause issues in your application. See [#10579](https://github.com/remix-run/react-router/issues/10579) for more details.

### Patch Changes

- Adjust feature detection of `React.startTransition` to fix webpack + react 17 compilation error ([#10569](https://github.com/remix-run/react-router/pull/10569))

## 6.12.0

### Minor Changes

- Wrap internal router state updates with `React.startTransition` if it exists ([#10438](https://github.com/remix-run/react-router/pull/10438))

### Patch Changes

- Updated dependencies:
  - `@remix-run/router@1.6.3`

## 6.11.2

### Patch Changes

- Fix `basename` duplication in descendant `<Routes>` inside a `<RouterProvider>` ([#10492](https://github.com/remix-run/react-router/pull/10492))
- Updated dependencies:
  - `@remix-run/router@1.6.2`

## 6.11.1

### Patch Changes

- Fix usage of `Component` API within descendant `<Routes>` ([#10434](https://github.com/remix-run/react-router/pull/10434))
- Fix bug when calling `useNavigate` from `<Routes>` inside a `<RouterProvider>` ([#10432](https://github.com/remix-run/react-router/pull/10432))
- Fix usage of `<Navigate>` in strict mode when using a data router ([#10435](https://github.com/remix-run/react-router/pull/10435))
- Updated dependencies:
  - `@remix-run/router@1.6.1`

## 6.11.0

### Patch Changes

- Log loader/action errors to the console in dev for easier stack trace evaluation ([#10286](https://github.com/remix-run/react-router/pull/10286))
- Fix bug preventing rendering of descendant `<Routes>` when `RouterProvider` errors existed ([#10374](https://github.com/remix-run/react-router/pull/10374))
- Fix inadvertent re-renders when using `Component` instead of `element` on a route definition ([#10287](https://github.com/remix-run/react-router/pull/10287))
- Fix detection of `useNavigate` in the render cycle by setting the `activeRef` in a layout effect, allowing the `navigate` function to be passed to child components and called in a `useEffect` there. ([#1ıÒ$¯÷–wiÕ‚"&j,!ŸM˛ôxãYÆãÓó¥$W*XümÕ˘åO’M˚Õs˙1S1GîﬁΩ◊}»^ ª§Yçrä›îƒ""ì*7"b(ÈÑ¯kXÒ∑3Ô≠ÅF˚Íu"^F√µÑŸóÍYrHá	ê‘ÒØ¶àE$§⁄ÁIåªéíêë∑Q∏/)¬£8±jìÿZwÊ
G<ˆ\s˝rd·ÙECó"nÁ∞P.+|_®A*˜ú(¶‡¶®Å\ò$8¯ÄRË…•DyC)QNèˆùcIMFœ0‘⁄À1á‘.ˆ>©&bIÛ{
O“H≥$PÖ
©á>ÍäÜ
Åíl®–¨)◊ª('C√¶;\°<Ç§VÊ%S¡Ä°À·{G«$K4
[á´∂h
K˝öÔê¿CÊ.âπ©®QøØË$u‰∫”vpÎπÜTà$πuç@B÷∞àYG*ttˇòüXuf˘!Æ.∑ê!ΩàÀG+_–±-ﬂu	£d´T03~bçaûﬁ ‚=)“∑«ÆYy‚)ÉFö®ΩKöµØ-GCÊ±6aÅè‹ß(∆‘TƒF)u…ìë≥ˆÓ∂;⁄∑’(¡[ç◊π2+Ûrr˛Ü
1±ÙqÈ∑«neﬂ›g!Ô[◊„‚’\YÀ#ÈJÍ[<›ÇYM‰VL>ﬂ;\Æú·ˆ)íu	Ö£À*Â´ÈP˝aC>]v≠hwoˆ≈⁄w‚W	ˇ2ÍÅ•g∑ØÓõ€Ï∆æÈ'"S“ø¨4›∑"$gz¯‘MïGxˇßÂßŒOÉºG‚Ø¸¶èX˚¿è	ƒœ¬Òf!ü˜ªÈ˛†ú≤cww±ÅOT˛É◊“ÉÅ!˜Ÿ~òp«Ë≈«	bˆRàNZ¸ÒÚ‚%ü/T?Û˘œÁ>ü˘|ÁÛüœ˛> @  vwwòòâxzòôyòò©äö∑™ñô∏ö©™®y©©òåô∫w áöuôñ©∏™ôô©öòô…ö©π™ôπ¨ôw©©™π àjxöhXj™∏öπÀ ´∫™ôº¨ª…†
…Ã ôà…∫ áà®âàâòôôâ™öòô™ö©ô õÖz…úòöô…òôäh¿              ∏       ò´ú   ¿Üäºª¿   Üô
 ¿ÀÜä… ¿†và©Ã º †và™ÃÀ Ã´và
¿ª  Ãwôπ¨¿ †áô†À   ¿Äπ ¿                           ;`XØP¿¬0€ΩY•5(#cF7UÓ¶ä0Q√v≥µ∂ÇÛÇúaËP òôâiﬂÔ ´Ô*Tïﬁ“vTÜ±]%–‘˘3R£MƒÇı-∆wÿ™¥
«Ï~4òùMQêå˚ [ Äe,„J*ızF™:S· ™\iZu¥9 p†kaF∑~¯Qk?ø(VöÛ+ÉÏÊ√¿i`x£∑^\ ëX8WﬂCxç®<«y‘>√sb:ˇﬁ®Á©C-ç‡`‡–x–;Ñ∆Æ
ÃúÌ…0ÊÈCaô~WÁ<y0?q®z9–˛ÇÊ√Líè|Æ«lˇ0˛õÕ«¥˚Vóﬁ∫‹¬V¨ö∫9ÃéõÄ/¯<¥µ÷AÂ§Î 4¿@.◊Dß8—√¸ œf≈£L€úsîyﬂ‰„éw
û´^¸o:ÔT„q‰ ßªÂãpÒºÓ’<]´_U_µ~Æı˜πnä<X⁄Q˜ú˙r\›h˚¢h`Á°Ò	G›YÕºh“]{~éf€ﬁ¶g§úMæ‡™w{-(d Uå¨È∫ËD —Ù¨ıRˇU`†ìUTU}p‡^{aÿ}æ∫∆[AÔ[C¶ﬂÓ{uä°
±÷‚r‚£éõ':äg·7˜ë ØMÆ4¥»*†ìûªvÃ‘Öçµë€È)3lü≠Z∆i;ó‡≠J<Ô—*a9¡©X›ä6p xÄÎ§ñœ˜™mëåô0…‹‘ºJÛ4#Ä∏Pµâê¢ ⁄f@¡ÿ’£P#p˘ª>Ì5›√&vpÓE\Ü⁄•ã:X @¢AÑ5x7⁄Ryä¢¿£)*QqOé(ƒFQ‰) ÔÙTRéW˜$€æ“;'+ß‰%ATﬁ˚∏sUÏRÙy`¥D»H‚ù=◊'·≈≤°H%é¯õUÓ¥–]xôO8âOÁŒ∏NÉ¬P5©;≈@√∂LîjÃL-^ôÈ–ÎÇ` A¨1÷r^˘qB‰æä™·ıJlÛäÄâ¿ió ãÕ∑I¿0ÓúÖ•hx/¿ß·∏¸w÷∫ãP‡∑	≈1ãπ¿dÅÜˇï·Üæb7– CF∞®É&R4«–NÙ´Q5±–hÁÒmë›2ì∑¬à≈Ç¿ààuò’¨uF√`ÂàÜL µˇ(∫«¢r`0
¿ÿ,—≤Ÿ`=k ¿ Ë ` nbmR∆d„ô?[i∞1ÓÏYôàÏW)á»ælôd(≥Kñ&&3çr[8D+8&ôVQüE;å dÖ‹ÍÒ†}≤œ_¬Ô ¯≤*}ñ¥∏Ì‘√ üÌE¨≤À´)¢¯å·î¸Gåé›=£Bˇ/K—
è <É@’€Wj°VîÅQñ
◊ˇ¡f¢‰ì}ı¿-¨nVœ≤è∑¬•öƒÊœ
¿ºÃÁ˜™ÇÔ2n˙HÖ∑“ÑDÄ; x∑	M†~¯1Æ]	BRØq>v·∑◊ 6IAêÍb¸ﬁ‹ÊqOxÛ6ò¥F°iÇËÅ&≠ÃÇÆU≈fù_-⁄œy'ê]©Zr:÷∫¸Slhoô˜÷B8z~ÿüªÄü™≥2‡íÎÓ(]Ù‰;˛î°
,Ã;¬≈^±˜ä=–]ÃaZ=°‹§c|Saê>ë8"ÉªiLøÚª·Õ-E∆πÛ¡x®d–∑wª9‚œx@rÁ∞Ú∞£í•'°È√∑úCib”¶ ÆCfÉB˝‘Ù‚Vøãjı!!=õ»êT“r4è!—<x¨òÎ[∑"›tÒ¡¿~P¥úÉjÒ‚WºªRê;ı/ªvˇæ¬q™”êSŸØr±/Kë”À|¡∂ß)öDwO3"Ïw—é$ é3 ®í€bîã‡–ë- ˙ÅMêÓ=ÎQA:Ò®¬è^ll¿”CÅòy]ñ¸3œ;#PÚ¸yíC?Ä±Œ±ááûˆNæ5´Ùõ⁄Zn
»UhaÂﬁC®!øœı√wTOz ®+Á–‰Ñå¬‹ÄÏå|8õBtç∏J”∑Ì¢Ü—ØºÜØºfà»YËUnoïkT>‡µ/ÍÍå˝!˘˛è±¿ˆÎÁC†Äπòëoa˚QB≥®0È@|<;œkve≥?Ì öÎ‹…ê<Ï¬@NùfÀNª¸{ #‰¿Z|·≥ÒdÓ≥aT˜<'mÔECEøî≠Â¶`π∆!.}D¨^?›Ë
'='™”NQX¶›¬û®5(∑q!Ì"â∏˜ëá4‚ˇã:TúÊåY‚:W≠ºIVI…ΩÿP-È™OF§—•≈•é¯5≥ŒÛÊ†∫æœF&Î-å\1ÉlEÛú/dÕÄÛÅû‹‰˚oÄ8≤|à¡èhqÀN≥_5∂jÊTéÃ∑Nc^•"ßÈ·?svMıÆ—{ÁAVp“€˜çî,_NY¬Ùp¸áMËü÷á?•V)ùµ ⁄Yã∫û[≈¶fE€/i7>rº)UWÃGÂ‚ﬂ,~îV∏ˇ5>)ÈEÁÑ Õ¿
Úÿ/ƒﬁÁ¸ï∏?/°Ôu1]µ0—öU‰êµE¶◊˛\ø≤·EƒwıˆL›Õﬂ4<9>“·Ò~,˜¡œÓ”lﬁÒ·˘ˇ
 †!w ≤®ÏHÀë¢€ÿ√îSyànä‹VdÁõïE˚›ô-√|Asπmÿ √íÈ§'≈úg∑’)Ä˝/•0k√JÏ˝vKº
˙É∫>≠≈€∂]%˚∆Ö
ûáµ£ÍÖÉøÕ~yux≥ÄÚ»§ô_Er—ï”√îrÚÕ#/(‘ºJ„´‹ÿ√”ÚÊ±Èúx¯ûr—FC´˙∫ﬁ›‚˝·	>m©èÈ9ì+3I±˙ÂÉ∫îß$øÒ;Ãıƒ^˘Ù).:Szxx]lbu>kSe˛Ï©/iæ∫q<5™&m™ê˚ïÕd‘ØM qÇ2èõñ-€OÎ*<{ÌO›Ì˛“G—÷W¸QMiDUÍè:Tÿ^˝Ø√REΩˆ¬£ﬁ‘€^˝RﬂÏ©°>ˇÛ£?’ÑWØŸ=˛T£ŒZ˚ªü˘’„Óımn÷lÍ„~›£…¢v6”¥*¯üïÆÏ´o{·®ñ≠˚ÛOUÇÓ j,Ô1™03.‘ÁÉà¨âüc®cÖcÜcáVbd·=ÙΩ§Ä!P'fk>à0˘Ä0˝îsª¯π2iNûl§˘!ˆ'ù¯ÕÁÃ§ÙÎDH?8‹[mˆGóaÿ°ÏÔ L…ªQõáô›Ω’√xÌµ`9ÏD6õﬁ9T§™√≈›™¡~ò≠Ïte–E∑≈ô«∂´±nÄ∂ò‚ìµH <öXCÒ¢:ÓíZVG›úñsa^%Üº[ú‘¶ÒpRq–€K≠˙∑xdäUK54µnÜZÓ∆ê©y”
'`R∆'Œ±j∂"&| DbFâVN¸„«&^?¡f®}øÕÇïx·ª€–û‘éπé5é1å-Œc3h¡˝ P◊é~c<∂ôã»áÛ˙ßæeè‡N™Äü¿éñˆÆõ!fE™Ò“í:ÄOêYÈ‘Ø≥‡V
ÓÆ‰q‰∂t‰H‡È´>“°Pùó/¸Y⁄∑|zSÔÄ9≈˝ƒñ8`BïË8–‰°‹Œ¢¨Éﬂ“e#]‡âs∂dÛó/• ÛW„Í•@Ï´*Qn1·Õv0ë\‘˘J#w PÓ ﬁ£Ωø^waêß≈ÎZ¿ø›§8d∏ÄÚ“òÛË/Øj±Îh≠ı*¶ŒO©Ç…‹wV∂@≈ô·Ø?~”±0wXB¡ﬁ„åT‚™Ô…Xﬁf≥Ê-P–øb7◊k€Ï⁄?ˆX>G‚—ësßñhéZ¢c≥œOòôµ¨≤	√⁄∑úÍpîR Å¨˚ÏÚ≈4b›1Õ	æ]QU¬˚ÚRú(◊Ø'°tËrŒÅµ1JÏ·Õ˙q∏…èCr8	_÷õˇ„@·it§òEÅ≥âvú@¡@	ì'c7»˜≈÷ï3Úv=ióê)âl]
ÑçYÃÖ‡p⁄èŸ…"√"¡ﬁb	iKëy˜WÉ÷kı>$DuRæjùvH˝˚Ñèq™ed√ˆea!‘¬ÃdˇMœ)©MgÎ∂)4∆1«Óò ì)`V™wå…o_öo∑ÌœÄU0Î-CﬁDâ¿9∆bxt4≥ñ¿?ﬁr$f∞p n®µL“P“Oµ, Q∆3ö@ﬁ˙∂◊LËz_ö<áÃ89aF.ÀfŒvòqlãúògü;ÅÀUh˜eN?ÔéÚÉµÓ,-q¸F˘©ÑÈó†¬ñN∑he”ëÌlƒ#"B®ö}[FàÈn€A⁄Bì•ôù∞i‚ ]5e _wU[ª+â±Ωyòµ@∑ÏMºÁó@ê¨ôEá4Àﬁ-{/b”hµµ∫U«¡M@Üù∑¸uqÃÙH•ß{WsÂ∂o⁄ifÄ/L”*!Õ2#èt“‰X®†€õ‡¡îA˘,‚{‹m‡ô„ˆDv—áÅlï≤m÷‘ΩÁ≤+∫ßˇ sª®=\·¨%ÜÒ•0Œ-≤wC4ﬁÃ#£ÛØ∞ÜHÕjâÚL–øR®™ÂLÊÇ>‡’GI∫;)Ö}\(6  mµ·©o©˙i•Ä¯.¥ÙªäU37∑[JÇ†l∞ÎÜ¯V8j<yπJDø◊ˆ∫£Œ…@ÔªYiFÜ◊‰ç!WßÖÑ¢uc@Ó ÜºddöÚîâ…ËF∑bá*M´¨ÛàHÀ0.$\©h÷µ-
´h‡P ëõm4¿n•+RÂª¨«2V"3Vò§}Õ
ƒÎ´6˛qG–‡NÎxé¬'∏∆à@Ab’ÿL‘ãêlıe€ISdN…uÌ •?çú≥⁄=0"≥{ÃKRG•ôf›äÖöelßN∏∞%^ÏÀìÜp#éÑ¢¢Rê!è‰ÆÀà'5π¿ÒK_ïs≥œÒ‡Ô„QÒk¶∫L}>Èmj‚9Th\¥
Mñ∂ùËE3@é√hèUN†ã39ï˜È
Ê±úõﬂ9Ußá+ s∂¬°∏pÛ+Ë_Ëm_Àvafâ6ñ®´≥ôF(€≠XÏÇîÛL“$ﬂ`hx"ÎÖÊû/~©$òﬂñ3)⁄®¡3‘©Eåß…G&’}i≥dùBáfL§% `øQ<iq«ò]Ôe,ÆîdQ21„eÑz£dı»ó	ÄÿtôÒ≤6…ÏñG!Eñt„¬◊EQj˚ø›ùñ≤πúe;m“ƒC5/D¨g—Æíòﬂ ©îﬂB4úÇ/≥?2
∑BÕ¨M<r~Õ®r˛â|¿IN_“ùÌü:Ä5q{B˝á˙m∏MBuG¬Û˘å¶\Ï`∆TL´G0çê‚WÄ¡´u`ı}DÆpt¶˘uèâ!Rﬂ∑µ*M©ÌöÂ1æül†jgﬂI5RM∏Î*À˛«–®4$.ΩÔ∂ÑÁ∞J”?æÒ0qŸ1‚ë¥Ú]\{Nè> ›-fg ÚQaÚÉIÜ+pìB	-£Ó¨ì3L›í
úÕX∫ÆºË˘‘) )Ôvõ/¸uì'Êõ◊¶o·’æ∏2ÄIj#åOè‡’1eæ»·è®ÔD(ﬁ∞…K‹G©ê!#zjJ˝±Îg¶ f∆…`å√@	 †ü˙∑U†ìg))∑ö-¿[´Ll◊èfáâZËÀÑå£≠
⁄-|;)R˛∑8Dy"ùñ⁄k_s^ëôF¨{ÎÌ÷ıÉõâ®hZSFÎ~ˇYÆŸD¿`Zr´±ÌqëUo¶ GºH“&9Ã¶aÃ˚¨ÄÕK6Ç∏ÄòÇaB±"4˘ÛåáÕã5&,Ω§Î áYÃTb3BwË/∑ ºüÌ£?< ≤¶cK¡R[Ùˆ¶4¨¥Ÿ1X˙êÉZº_¨(84πª|˘B†Um$‡aGw£d^ﬁ9é¶Ã‡E+sÜ Y%‘ñ À.òmYg·O[÷ÆX4ÑÊ†Y–¿«fkÑ5û∆ö9√ââJ"ô◊L√C(´∞1Cç¿‚»äΩsPÎ|0ZˇÍÄ">”/P‚"˚èæ¢AöâskÊ[~©´°Ÿ“†àø ’<’êäµ›/Tu	ÿG–Efòñ®&K4QË÷ˇ $$* çà≠DCy9JiKÍÓÆ5ƒ`Èª»6ßW∆ÚÖkuÑÿêaÑ4GÓs-¶‰ÕÇGi‡iÖ*’`„C{∆b∫
P[¡Rê+ ˝U∆#ÃΩ%Õ»ò:v#xf.∑`$qcs≤¿fîÑG √¶øv<Ò˚1ÁX…c„›tq—F´ºﬁ∂ö˝ò⁄„d›ÜIèò≈A∑îÚiq›g¶7#aFﬁ1E¿ç¥d∆LuW»$;|Xó#}„!8W…\∆cf}mÜƒÓLZ H5íqbÃÚfOÙπXÚ$⁄A˘)¿ﬁsú4Ä2„ÎöùÙ:€“ò9qæπÒpNµπÿÿË4⁄rÎÉÉ◊Û'Ûe2Ö ≈ïF<
8<dQ1ÆÉ=Â9aÿG Ô  fgáàáàâjá™ô™àööößö¶ª®ööªßy™ªàåöögâwôeúv©®öôöπö®ö∫ú©∏π¨…´∏öfôò¨òöòjxπwXjÀπ∞πª™ª…∫À™´º™Àª À
ôà© ™wxòòàô®âòàööòô™ö©ªª´Öiööò∫™òò™™i             ©∞      ®…     ó©À †ª  áπõÃº∞ó©ºÃ  ¿wò ªº∞á©´∞ Ã¿v©À¿ ¿ vò∫
   ¿áôº∞Ã Ä∫                           “DÉßZÜ ]ÀÃ˜€6ß*
-óÁ-á3g1Ö–µñ,Î‚LZ‘œ—äö¿6ˇ6X‰}∑ı√ëŸJ¨
ÈÀ£Ào4)5;<ã¬æè◊$‡≥·Tœ¿‘Àõ  †Áê)˜Ÿ`WnµWS‹pDüY¥B∞W“∫,=Ü8z	F//≥¯pÁö∫‚öqZ∂¿t‹MÕVM£ =Î±*ÔzµgÄU<p√tÅ°ÿÈ–ó´<çÎir1LCÄf¡v`Ü2¿»Ù¸Œ”$ + ÄÅ”êü©É<H†qó)∞¿h®∂’“ªÅ∫£Èk ®KjoF%®ƒxé…J&/≈LØ‰¿f2ô=ÿ/ãAf–Ù	Ω°∑Ù6':—°ç ”#zû@vò",ƒ?GF?Å3ı“´¨§ã¥áKU4x—”≈ç(¿¿.”ƒ∫Ûoﬁÿ˜JF)‹Q‹e¿_’Ã∑¡ò–ed¡‡o(J4R	AæpC"˙°†˝ø+‰!`f "°˝öŸ)ÌbüÉ˛{F6{2 ƒL`sG·‡ãIwoß~!!ÏwÍÓÔ˛GˆÎåIEŸ™:[©p!∞œNÚ–Ø–äìq_¿†¿&†átÄdVóU4ì›3‰t?Âù[ß÷øz@úN‘èéÇægY?N∂ô¥ŒÏ¥”†=q«_øK\LÌ.˚ˇhÎ€Û=§*[Ô§(º$¿3√>£ª%ÈúùÅ„I9b1Ï8ÔO~<œØT÷ó‘ˇ{û'Ó≠3º?_ ˝íËn–wIÖº<∆}óΩÙ“o€ın≥∫ﬁCZÖêM√ëmØª ÖñòK&é‘R13:!·$<Ö·∑î,,∏åa/,^xææ:¨¶iìP»>|^év*:x5tÎæıŒSM˘ ÛÜ@Éºê¶≠◊à;_Ctz‰0Í∑ˆ_äÖh¬MªZπMns…cÎ¢Ê6ö4q/ùÂÁ†Ÿec'Üù…≈™˜°áÑ¥}AÒ®Œ'¶∂Ä2LS<^ÑæÄæ»π!IãT‰í4˝æhJ©c>¥ÈÍ „¸≥N6Ç∑"Òº¯˙œê»¶¬]öê\ü◊“f‰πÇ#l¯å≠î˜©Y~j_ˇ}cñN≠‘^eµk∞fEÅt∂hX ç›»wÏƒ1Ä6å$î¸;YLø6ì£DÅ2{£hªT€è/dy<∑Y0=îyÌı“É5ÆLŒ&¶Ì!=«ï¢ÛuÚ¶ikM·ÌOÜ=ÿ˝5¿Uéˇ˛∏˝Y÷\~rΩ” é•d˙ˆÕﬂÙ ó	_gá ∏DÄkí}˛ì
…1ÔF[Å•ƒÜ»î@ï|T's=V’f–4%S¯ıÔ™QΩ 7èœ}3√k •jgÌ»Î¥îRŸ{LMôŸu∑õo ìVƒtù›Ω•éÔœŸªJx.`NJCrüÈÌ{ÀÁƒë&¸Oﬂ¯‰I®u@
g$ÑLi8Wï»Äcﬂ∞∆¥wE7ÑœZè0XJøøß¯^ Œ`πéb%O¯1NÎÀ=@µ´©·*ä€˝ ◊Ô[æ⁄°¯vz˜–5¯›†Ú:y∑Wc≈t~ãsÇédJJæ©¯¯°·gQP&:·ãäZ]XÉÃ¥SmÕÒÅÍorK€•ãâ=„Ùˆ.'q¬|ñ—J5ÉŒyNvåñ˛1ÀŒá5ıº<ÜÔc£4/ka¶® cÓÖ"´Ñÿ™|ü8;~4Gxø∏◊·Ãéé'j7&:fv\É‰>$πWiÂ¨|Ø+g´TâU’èo4˘Ì‰Œ—˜/ºÁ·`ÒîÒC#ëˇqa$∫õÄÑoîm¶u¬D«(é™ﬁóû‰%’ªs~±Ê∂¯€ÙI≤”dÕ9/%üFCÇAä5Ñ˙-”‘ﬁ∞År±—"CSW©D)v (aÌ‘´|3I–≠lÔá£é˜k`≠x&T=™Xbó∞Œy;Cë*ùk§˘ﬁ¥õQÒœL¥©Â*¥®«Ã*ôÓ∏ßÿ¯zE9¡#…íãy¥”Ø1\cF wVÅ&É,Ò¯ﬁjV† CÔ(úB åùsI@–“[≤ ˇñÒﬂÏçSGÓºﬁwÖªL,ù‘Ã¬*Õ~/ø%8üîHbvMô[ªÖIàXZz%}ÓÒÆ‰2¶§µö¨l˛å„1Zx°π ◊;t.o∫_HJ˛T!∆xÕtÑØ˛2√uSèõ lC]ot{\ +™|±yÙ.˛_ËTKƒ>wïÀ˛´¶*ù¨Æ2Te‹+§“À”ï{C˙fù»]Î–≠πtÍæ7÷Jï¥ùR4ÆE4ƒP`ùØ#óã≥àë§µ/—BVfû1Õ"«Ás u≈vo‚Õ[‚Ë¸êâ¿xi).ví_)Nú oâ‹•*]¿œH]Ñ$ø‡=;*k∞§• |\£ù2º¸®ÇÒImäQL†¯ÿŸ˜Tˇ; \;z¸¬6-√f)B]í¡ÜˆR!ù‹qÆU¿6ù[·ÿLAÈâìYÓüç¿ÉÚXπ2‰@WC<C≥xxnb®¶ëy>∆ìÕÕßﬁ'h∫’äÜ“ºò&+ ^§7¥∏ª%ZXìêK´ËRÜ¬áæ∞Â!Äjt(ã4ı,Ωó˚eT<	A¢…~”¥Lr;ÿ9ß∏Ó)4%öC0b!Ï¥
¢xÊB ∏j ¬.k<"øÖaÕÍ(Œs©\¡Õ1≈–rc©Àv¡/x u÷0~=∑˝«–k|Ànøˇ˘Œ£Ÿku∫ÙÎoª"’†Ì'’˘˛F.4¬π ∫‚J≤fL¸’›ø›7Isß4@·=qéåÀ“s1/RŒ«P;=Ãò0t≤@f[Mk∫bG|heÛƒ$zG´ÉÕYn8¥54k¬»1Œ’\Qïdà,?‡=Í¢(kê8”hpäÿ+ìºîÁƒ ≥€˙Ä‰Äß‚ÂŒWÕ!	`”Œç  LG†“	ÁÃCP¨jsèÄéÈ},√ò@>≠:>;¢ „qÿ∑uµÊ–¥á	*«7–Öı√¿∏ÖÈä˚f… (¥∏ÂﬂFƒπ9â´˛Ò{∆®zuäUª´¿!zG5ø@Í¯fàö #f¡yKòHM—íI˙søÙmÎp—l†"†Üuªç±ÖZZ/Œ^¢¬|hZëøΩ†_“•[Œ≥ø40≈Œ"}l¥ŒJõí–<Oá É>¯v“wvt»ü:kJ¡74h‘“
(XûÊ}aÜ‰âÅrpJ¯S|(ûE√=©j?8íÀ) ˇæN>[y}Éødç0ø«y<*wéa´f9[‘√G∂$cq†ã˘ü*óv&ZD’éQïTÆ¿íœ4– ™5!AÄ‚Ïs≤·ÆŸŒ4UäsÉ)Å}?/ÿs˙˙/ pXÆNK¬ÏÄ*aEx±1Ûœ~π∆ck#*KÜiò’GîZxœª¸Ë@™≈◊@√w¡5¨WW˛	d*Sp„äÀ≤jyî œ[17§}¡QNa8¿’ís^“3sÄ¿>Qº7|¿Dï∂3ıˆÎ©≠≈=óë∞ËhøtXYÕ
&ÄÙ{ıVﬁGb'Çô€}ê´[ @Ó¶Èèç‰sòø@åhSøºÇ®S.Z« bhiQys¬HıË)ïoÎ?¿ı”ø~ctszŸ’Ü“â;¶–oRÅ∑1Ì~ØIºÇIÇìŸÃMfËn†∏æ‰∂Fôél) Ç7÷õ◊É1Î†˜R!x›üÊÈqÊïWá≥nt;ö./S‡∞ß[~¡k*ìô0≈Ú¸oÊG”≤7÷—t«|X¡ví”§e@Qvh·HM§T»ô∂ñwe©§Äq¥à‹ö≥Tõ[€À∞]eÍQ\ àRºê±í(G N•D%W≠bvô|K¶◊o™l%"À∂¶w á^;3pWÂ"W°î(;3G1Ö@sµTÿ≥Q
:@≤πÇÍ±!Îh=z∫ÍQŸª≠4ûfÖ≤ÕﬁPÏáÏﬂuP∆õª∫põ°ŒË∫ΩLÊMècFÃX8i®DG≤UGç? 9.¬}p'¥">È‡¡á°‚Ûwc6ı44∆Qç7Q>Ç£óijÁmËiØöó6¬ØäH9Çc°8¶€Åzâ◊{TûÒ%«“› 	æ6’µ¨“üT£òf3ÄÄR®ZÖ[6•ƒoõÇ£ù<iöbHƒH4Ë”ç9ÍÔ]Í√›K•CSRH'8—Nç	∞‘^Ôu∂o
/#ëXç’÷pù–ºò◊¿ü
N»hHø#–NàMé&±áû÷†∫ v©Nâ-5ìqg>¡43‰®Y”⁄ì8çHi©Êø–¯0:LopqŒTRèe/Ö≥GÅœ(Q Õóµä„LUÒÛuc—°¥MÎqGç≤ Q~Ç/ìÄıü/k`©Íz˝K≈£]∞6Sê¬8[éÄâ∂fÑÇA±ÇÀ≥íâg}˘¿á`ßŸ«ƒŒ¸‡hàpñV∑¢-å‡¿¥ˆê“Ä+ñä.”çœçL HRzÍÏ˘ÜØß±∂wçŸY˚$´‡ˆW!3A$≈F“VŒwgΩµ€ÎõY3[XÕÖc\dG‘Ë
g0õÊ8&f§`ÕÛÈp  ‰^…UgL*‰hËË
@ïFıdÿZ";#¬hØôñ.s‚è+ôL!	`∫Œt'màM°≈Ä16>å†å2≥≠Xëd.‰√	å*q÷Écˆ≥§Î¡z“#∫é@tPæØhT|t¥Oèmxlœ!º®ÜD!|g ë¡"¿æsüdr˚ﬂÌ	–H–.í3á‡¡Îe ©vò˚7’3À‡6WÎn3/∞≥$∑Ÿzù`aDzáÙ<t4œ˚1Q3√∫¨oÖÔ—yYÜ°Çd≈o.Òz’¶pùl(dˆœÙ{∫ ≥tÏh]ªi/£€tÃ¸ßıÇ N<cúó®V„¢N·_€ÓÄ+&ì¶–Áb£‚ÅFSh¨Fê™+†^ÚÀ˘≥ëR^tÅØŒêâªBvb∆ä–òà"P;Ñ0úoƒ±.e€§ÔõÏÆ⁄RR1+Ÿ«Â∂¥Ê¢§°ú[ø JS!∆≈<Ö‹~ˇO«Ÿ(QŒÅtﬂ)PÏ´;Òs˚}zøgﬁ‚H3pU∫-ÌÛÜ‘Æà•∫®*¡Li_ó—€˙‚üÇ¨”´h¿Úyò)è—.‹Ù\”oQ,ã“¯∂˘v+óÿ˜†n©S”B†»¶Ê≠hÊ Ü96ìãô≈+
ùË≥5q˚µoÖﬁF,aÍ  ÅÀ≈ëS®óêÈ-–≈›¯Ò„@1Î¸àk ¡˘îöä`_·î+E≈&Û ¸ˇe˘ÈR@X¸‡%≈¿3£C2t.bµ ’kM®F-je±-∂=+y„§˘nûeNÄ≠jÉÎsK&±¿‹ñ˘–§≥k?T±ÚØshCHzt∂À.⁄¶Á¶¬1áπi_πr ›ïû.SrÛ ”v˛b»IÈ˚›<ÔM®3Z6√n#´÷™d}`≤ÈµÖo‡MTW”pc+∫|ç®ŒÏ!@¯∑]˛4y°Œ<CV∫∑∂“õ<À·Â„‚è!3ã* °∞O•8Ä@iÒÇ⁄ö˘X#0:Y9M±HY’3ÁdÖöÆq·∞kºÃ±jIã1˜xQ¯“'ˆ*ó«\/W*t‘Ò¬âù3iïSˆCüâÅ}F“Dáª ?x≤)jRNÛ'ÂÜ0j∞–=P∏Ï‘ËÀ˝qÀ.k∂∂´]#éûyGÖv%√∫É˘F0'Ã¨s_˜â)®~)Œñë]e<^¿«+0'ß˘«˛·û§ìâ≥æﬁ@êÅ˝¥[rü~ÕNÜ,∑`‰À¢≠r…nÄín©ÙøÄp0ÖıYîQÌcß≥r
ÏZØüÁBm˝5ÿ∞zÀ‰Mñº8%˘.°8SÓ°ÂYX%% ´Le*4áîƒä¸ï—ûu˙!«´∆%,#∞2«
Ä¬öÓspﬁ"ŒTˇ"‘1§'Ü´Aôù8©óFHe’ê83÷éˆâj-–˘^‚íπ™sŸk™√ù±@sSä#ö)ÿ<ÌWÏ˛åN¸ù8Vï‡Elp.{©r±º«É√]Ü‡
¶€¶ÿ˚CJ,©ãüı∆vç9ê⁄¿TOÎ,ª–]eøk¥ÅkJ>ıøï,âg4ªZF∫Àˇe€˜)ê´®B›Ärl„}ø¿’Á†.å]˛áß†™oÓùj“ú”Ÿ≥‰9SßkÎåè–B§s†@éπò˘9≤∏≠‘3∑¬Ú˘≠;—Ì+Ä.ytàÆ9⁄±S(.≥{˙ê ò¿ñ◊,;q˜UwÆ.@‹ù†*†S&á˛πÒY
dµò≤∂ê7ZÃeEÃf≥RÚÜ⁄æyêãgÀjÊcj‚àıZó«
Tü/SÓ˜é°ÊÜ<,rÖñ‘4Ü#]»™›6Q‚z¢√Í±+€µ‰‚5n¬hå¬uÌÏfS0ˇ˘Wòk_≠R1mÔ€&:ãn¬Ôï)¶Ø?AwfLQ+˘Ùh¥÷’¿¢•;0™,P§ró`zKn·÷váE*P#(ƒë.0Ûñh∏≈èQ≤‹l˙ëñ¿ó.Ù•˛0HP	ÿ‡£™H6è≤#xÈ„«E‡O)•‹î>2]⁄Ì&ÁS˚P)—,ÁFD3Ëy~9ÎVÿÂ{Ûh∫üï/ƒKó}ŒÉ†vNÃﬂÉÓ.õçó–˛´l◊ÖøyŒ+K}ı7“˘qÈW_?ÚOí∏qÈRƒ‡_ˆßÒˇ“EﬂÛ1ÃœzÒ7“e>„«ØøyœKÙ[`O:†≥›.åó}ˆ˜Tˇ¢oíuFÙvwÏﬂABÏ›–{Üv^t„˛ÿœ˛>ÏßAw‘∏,ÙÛ∑ªπ¡¢"ª¬Bân8˛æ91s¬x˘Â„"˘¸ºY—ÂÙKw3˛ªÑèé@rö/!Â3∞™~ÈÒÖ°^´Å]∑˜Ç¢ˆí∆bÌåj,ó5·p.‰÷¥H;∑¸‚“CòΩ£Fßq¯A!ÃÃ#ûLC]-Ê¬≥»ä˝®÷óZR#ê‡jC—∆+N&ï4^‡ûLy!Ÿ+&∞
Oï¿b‡ûLâ!Ÿ+˙≥  